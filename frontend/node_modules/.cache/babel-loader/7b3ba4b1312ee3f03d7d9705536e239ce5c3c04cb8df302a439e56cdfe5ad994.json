{"ast":null,"code":"import _defineProperty from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import PopupWithForm from\"./PopupWithForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditAvatarPopup=function EditAvatarPopup(props){var _React$useState=React.useState({avatar:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),avatar=_React$useState2[0],setAvatar=_React$useState2[1];var _React$useState3=React.useState({name:true,about:true}),_React$useState4=_slicedToArray(_React$useState3,2),formInputsValid=_React$useState4[0],setFormInputsValid=_React$useState4[1];var _React$useState5=React.useState({name:\"\",about:\"\"}),_React$useState6=_slicedToArray(_React$useState5,2),formValidationMessages=_React$useState6[0],setFormValidationMessages=_React$useState6[1];var _React$useState7=React.useState(true),_React$useState8=_slicedToArray(_React$useState7,2),formValid=_React$useState8[0],setFormValid=_React$useState8[1];var handleInputChange=function handleInputChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setAvatar(_objectSpread(_objectSpread({},avatar),{},_defineProperty({},name,value)));handleInputValid(evt);};var handleSubmit=function handleSubmit(evt){evt.preventDefault();props.onUpdateAvatar({avatar:avatar.avatar});setFormValid(false);};var handleOnClose=function handleOnClose(){props.onClose();setFormInputsValid({avatar:false});setFormValid(false);};var handleInputValid=function handleInputValid(evt){var name=evt.target.name;if(!evt.target.validity.valid){setFormInputsValid(_objectSpread(_objectSpread({},formInputsValid),{},_defineProperty({},name,false)));setFormValidationMessages(_objectSpread(_objectSpread({},formValidationMessages),{},_defineProperty({},name,evt.target.validationMessage)));}else{setFormInputsValid(_objectSpread(_objectSpread({},formInputsValid),{},_defineProperty({},name,true)));setFormValidationMessages(_objectSpread(_objectSpread({},formValidationMessages),{},_defineProperty({},name,\"\")));}};React.useEffect(function(){setAvatar({avatar:\"\"});},[props.popupOpen]);React.useEffect(function(){var formInputsValidValues=Object.values(formInputsValid);var isFormValid=formInputsValidValues.includes(false)?false:true;setFormValid(isFormValid);},[formInputsValid,props.popupOpen]);return/*#__PURE__*/_jsx(PopupWithForm,{popupType:\"avatar-popup\",popupTitle:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",submitButtonText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",popupOpen:props.popupOpen,popupFormName:\"updateAvatarForm\",onClose:handleOnClose,onSubmit:handleSubmit,isLoading:props.isLoading,loadingText:props.loadingText,onOverlayClose:props.onOverlayClose,isValid:formValid,children:/*#__PURE__*/_jsxs(\"label\",{className:\"popup__input-group\",htmlFor:\"avatar_url\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",className:\"popup__input\",name:\"avatar\",id:\"profile-avatar\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",required:true,value:avatar.avatar,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"span\",{className:[\"popup__error\",formValidationMessages.avatar!==\"\"?\"popup__error_visible\":\"\"].join(\" \"),id:\"popup__error_type_profile-avatar\",children:formValidationMessages.avatar})]})});};export default EditAvatarPopup;","map":{"version":3,"names":["React","PopupWithForm","jsx","_jsx","jsxs","_jsxs","EditAvatarPopup","props","_React$useState","useState","avatar","_React$useState2","_slicedToArray","setAvatar","_React$useState3","name","about","_React$useState4","formInputsValid","setFormInputsValid","_React$useState5","_React$useState6","formValidationMessages","setFormValidationMessages","_React$useState7","_React$useState8","formValid","setFormValid","handleInputChange","evt","_evt$target","target","value","_objectSpread","_defineProperty","handleInputValid","handleSubmit","preventDefault","onUpdateAvatar","handleOnClose","onClose","validity","valid","validationMessage","useEffect","popupOpen","formInputsValidValues","Object","values","isFormValid","includes","popupType","popupTitle","submitButtonText","popupFormName","onSubmit","isLoading","loadingText","onOverlayClose","isValid","children","className","htmlFor","type","id","placeholder","required","onChange","join"],"sources":["C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/src/components/EditAvatarPopup.jsx"],"sourcesContent":["import React from 'react'; import PopupWithForm from \"./PopupWithForm\";\n\nconst EditAvatarPopup = (props) => {\n\n    const [avatar, setAvatar] = React.useState({ avatar: \"\" });\n\n    const [formInputsValid, setFormInputsValid] = React.useState({ name: true, about: true });\n    const [formValidationMessages, setFormValidationMessages] = React.useState({ name: \"\", about: \"\" });\n    const [formValid, setFormValid] = React.useState(true);\n\n    const handleInputChange = (evt) => {\n        const { name, value } = evt.target;\n        setAvatar({\n            ...avatar,\n            [name]: value\n        })\n        handleInputValid(evt);\n    }\n\n    const handleSubmit = (evt) => {\n        evt.preventDefault();\n        props.onUpdateAvatar({\n            avatar: avatar.avatar\n        })\n        setFormValid(false);\n    }\n\n    const handleOnClose = () => {\n        props.onClose();\n        setFormInputsValid({ avatar: false });\n        setFormValid(false);\n    }\n\n    const handleInputValid = (evt) => {\n        const { name } = evt.target;\n\n        if (!evt.target.validity.valid) {\n\n            setFormInputsValid({\n                ...formInputsValid,\n                [name]: false\n            });\n\n            setFormValidationMessages({\n                ...formValidationMessages,\n                [name]: evt.target.validationMessage\n            });\n\n        } else {\n            setFormInputsValid({\n                ...formInputsValid,\n                [name]: true\n            });\n\n            setFormValidationMessages({\n                ...formValidationMessages,\n                [name]: \"\"\n            });\n        }\n    }\n\n    React.useEffect(() => {\n        setAvatar({ avatar: \"\" });\n    }, [props.popupOpen]);\n\n    React.useEffect(() => {\n        const formInputsValidValues = Object.values(formInputsValid);\n        const isFormValid = formInputsValidValues.includes(false) ? false : true;\n        setFormValid(isFormValid);\n    }, [formInputsValid, props.popupOpen]);\n\n    return (\n        <PopupWithForm\n            popupType=\"avatar-popup\"\n            popupTitle=\"Обновить аватар\"\n            submitButtonText=\"Сохранить\"\n            popupOpen={props.popupOpen}\n            popupFormName=\"updateAvatarForm\"\n            onClose={handleOnClose}\n            onSubmit={handleSubmit}\n            isLoading={props.isLoading}\n            loadingText={props.loadingText}\n            onOverlayClose={props.onOverlayClose}\n            isValid={formValid}\n        >\n            <label className=\"popup__input-group\" htmlFor=\"avatar_url\">\n                <input\n                    type=\"url\"\n                    className=\"popup__input\"\n                    name=\"avatar\"\n                    id=\"profile-avatar\"\n                    placeholder=\"Ссылка на картинку\"\n                    required\n                    value={avatar.avatar}\n                    onChange={handleInputChange}\n                />\n                <span\n                    className={[\"popup__error\", formValidationMessages.avatar !== \"\" ? \"popup__error_visible\" : \"\"].join(\" \")}\n                    id=\"popup__error_type_profile-avatar\"\n                >{formValidationMessages.avatar}</span>\n            </label>\n        </PopupWithForm>\n    );\n};\n\nexport default EditAvatarPopup;"],"mappings":"qgBAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAAE,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvE,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIC,KAAK,CAAK,CAE/B,IAAAC,eAAA,CAA4BR,KAAK,CAACS,QAAQ,CAAC,CAAEC,MAAM,CAAE,EAAG,CAAC,CAAC,CAAAC,gBAAA,CAAAC,cAAA,CAAAJ,eAAA,IAAnDE,MAAM,CAAAC,gBAAA,IAAEE,SAAS,CAAAF,gBAAA,IAExB,IAAAG,gBAAA,CAA8Cd,KAAK,CAACS,QAAQ,CAAC,CAAEM,IAAI,CAAE,IAAI,CAAEC,KAAK,CAAE,IAAK,CAAC,CAAC,CAAAC,gBAAA,CAAAL,cAAA,CAAAE,gBAAA,IAAlFI,eAAe,CAAAD,gBAAA,IAAEE,kBAAkB,CAAAF,gBAAA,IAC1C,IAAAG,gBAAA,CAA4DpB,KAAK,CAACS,QAAQ,CAAC,CAAEM,IAAI,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAG,CAAC,CAAC,CAAAK,gBAAA,CAAAT,cAAA,CAAAQ,gBAAA,IAA5FE,sBAAsB,CAAAD,gBAAA,IAAEE,yBAAyB,CAAAF,gBAAA,IACxD,IAAAG,gBAAA,CAAkCxB,KAAK,CAACS,QAAQ,CAAC,IAAI,CAAC,CAAAgB,gBAAA,CAAAb,cAAA,CAAAY,gBAAA,IAA/CE,SAAS,CAAAD,gBAAA,IAAEE,YAAY,CAAAF,gBAAA,IAE9B,GAAM,CAAAG,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAIC,GAAG,CAAK,CAC/B,IAAAC,WAAA,CAAwBD,GAAG,CAACE,MAAM,CAA1BhB,IAAI,CAAAe,WAAA,CAAJf,IAAI,CAAEiB,KAAK,CAAAF,WAAA,CAALE,KAAK,CACnBnB,SAAS,CAAAoB,aAAA,CAAAA,aAAA,IACFvB,MAAM,KAAAwB,eAAA,IACRnB,IAAI,CAAGiB,KAAK,EAChB,CAAC,CACFG,gBAAgB,CAACN,GAAG,CAAC,CACzB,CAAC,CAED,GAAM,CAAAO,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIP,GAAG,CAAK,CAC1BA,GAAG,CAACQ,cAAc,CAAC,CAAC,CACpB9B,KAAK,CAAC+B,cAAc,CAAC,CACjB5B,MAAM,CAAEA,MAAM,CAACA,MACnB,CAAC,CAAC,CACFiB,YAAY,CAAC,KAAK,CAAC,CACvB,CAAC,CAED,GAAM,CAAAY,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CACxBhC,KAAK,CAACiC,OAAO,CAAC,CAAC,CACfrB,kBAAkB,CAAC,CAAET,MAAM,CAAE,KAAM,CAAC,CAAC,CACrCiB,YAAY,CAAC,KAAK,CAAC,CACvB,CAAC,CAED,GAAM,CAAAQ,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIN,GAAG,CAAK,CAC9B,GAAQ,CAAAd,IAAI,CAAKc,GAAG,CAACE,MAAM,CAAnBhB,IAAI,CAEZ,GAAI,CAACc,GAAG,CAACE,MAAM,CAACU,QAAQ,CAACC,KAAK,CAAE,CAE5BvB,kBAAkB,CAAAc,aAAA,CAAAA,aAAA,IACXf,eAAe,KAAAgB,eAAA,IACjBnB,IAAI,CAAG,KAAK,EAChB,CAAC,CAEFQ,yBAAyB,CAAAU,aAAA,CAAAA,aAAA,IAClBX,sBAAsB,KAAAY,eAAA,IACxBnB,IAAI,CAAGc,GAAG,CAACE,MAAM,CAACY,iBAAiB,EACvC,CAAC,CAEN,CAAC,IAAM,CACHxB,kBAAkB,CAAAc,aAAA,CAAAA,aAAA,IACXf,eAAe,KAAAgB,eAAA,IACjBnB,IAAI,CAAG,IAAI,EACf,CAAC,CAEFQ,yBAAyB,CAAAU,aAAA,CAAAA,aAAA,IAClBX,sBAAsB,KAAAY,eAAA,IACxBnB,IAAI,CAAG,EAAE,EACb,CAAC,CACN,CACJ,CAAC,CAEDf,KAAK,CAAC4C,SAAS,CAAC,UAAM,CAClB/B,SAAS,CAAC,CAAEH,MAAM,CAAE,EAAG,CAAC,CAAC,CAC7B,CAAC,CAAE,CAACH,KAAK,CAACsC,SAAS,CAAC,CAAC,CAErB7C,KAAK,CAAC4C,SAAS,CAAC,UAAM,CAClB,GAAM,CAAAE,qBAAqB,CAAGC,MAAM,CAACC,MAAM,CAAC9B,eAAe,CAAC,CAC5D,GAAM,CAAA+B,WAAW,CAAGH,qBAAqB,CAACI,QAAQ,CAAC,KAAK,CAAC,CAAG,KAAK,CAAG,IAAI,CACxEvB,YAAY,CAACsB,WAAW,CAAC,CAC7B,CAAC,CAAE,CAAC/B,eAAe,CAAEX,KAAK,CAACsC,SAAS,CAAC,CAAC,CAEtC,mBACI1C,IAAA,CAACF,aAAa,EACVkD,SAAS,CAAC,cAAc,CACxBC,UAAU,CAAC,uFAAiB,CAC5BC,gBAAgB,CAAC,wDAAW,CAC5BR,SAAS,CAAEtC,KAAK,CAACsC,SAAU,CAC3BS,aAAa,CAAC,kBAAkB,CAChCd,OAAO,CAAED,aAAc,CACvBgB,QAAQ,CAAEnB,YAAa,CACvBoB,SAAS,CAAEjD,KAAK,CAACiD,SAAU,CAC3BC,WAAW,CAAElD,KAAK,CAACkD,WAAY,CAC/BC,cAAc,CAAEnD,KAAK,CAACmD,cAAe,CACrCC,OAAO,CAAEjC,SAAU,CAAAkC,QAAA,cAEnBvD,KAAA,UAAOwD,SAAS,CAAC,oBAAoB,CAACC,OAAO,CAAC,YAAY,CAAAF,QAAA,eACtDzD,IAAA,UACI4D,IAAI,CAAC,KAAK,CACVF,SAAS,CAAC,cAAc,CACxB9C,IAAI,CAAC,QAAQ,CACbiD,EAAE,CAAC,gBAAgB,CACnBC,WAAW,CAAC,oGAAoB,CAChCC,QAAQ,MACRlC,KAAK,CAAEtB,MAAM,CAACA,MAAO,CACrByD,QAAQ,CAAEvC,iBAAkB,CAC/B,CAAC,cACFzB,IAAA,SACI0D,SAAS,CAAE,CAAC,cAAc,CAAEvC,sBAAsB,CAACZ,MAAM,GAAK,EAAE,CAAG,sBAAsB,CAAG,EAAE,CAAC,CAAC0D,IAAI,CAAC,GAAG,CAAE,CAC1GJ,EAAE,CAAC,kCAAkC,CAAAJ,QAAA,CACvCtC,sBAAsB,CAACZ,MAAM,CAAO,CAAC,EACpC,CAAC,CACG,CAAC,CAExB,CAAC,CAED,cAAe,CAAAJ,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}