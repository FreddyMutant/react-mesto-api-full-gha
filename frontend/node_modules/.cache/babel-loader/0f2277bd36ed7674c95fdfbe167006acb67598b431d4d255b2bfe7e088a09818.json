{"ast":null,"code":"import _defineProperty from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import PopupWithForm from\"./PopupWithForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfilePopup=function EditProfilePopup(props){var currentUser=React.useContext(CurrentUserContext);var name=currentUser.name,about=currentUser.about;var _React$useState=React.useState({name:'',about:''}),_React$useState2=_slicedToArray(_React$useState,2),userData=_React$useState2[0],setUserData=_React$useState2[1];var _React$useState3=React.useState({name:true,about:true}),_React$useState4=_slicedToArray(_React$useState3,2),formInputsValid=_React$useState4[0],setFormInputsValid=_React$useState4[1];var _React$useState5=React.useState({name:\"\",about:\"\"}),_React$useState6=_slicedToArray(_React$useState5,2),formValidationMessages=_React$useState6[0],setFormValidationMessages=_React$useState6[1];var _React$useState7=React.useState(true),_React$useState8=_slicedToArray(_React$useState7,2),formValid=_React$useState8[0],setFormValid=_React$useState8[1];var handleInputValid=function handleInputValid(evt){evt.preventDefault();var name=evt.target.name;if(!evt.target.validity.valid){setFormInputsValid(_objectSpread(_objectSpread({},formInputsValid),{},_defineProperty({},name,false)));setFormValidationMessages(_objectSpread(_objectSpread({},formValidationMessages),{},_defineProperty({},name,evt.target.validationMessage)));}else{setFormInputsValid(_objectSpread(_objectSpread({},formInputsValid),{},_defineProperty({},name,true)));setFormValidationMessages(_objectSpread(_objectSpread({},formValidationMessages),{},_defineProperty({},name,\"\")));}};React.useEffect(function(){setUserData({\"name\":name,\"about\":about});},[name,about,props.popupOpen]);React.useEffect(function(){var formInputsValidValues=Object.values(formInputsValid);var isFormValid=formInputsValidValues.includes(false)?false:true;setFormValid(isFormValid);},[formInputsValid,props.popupOpen]);function handleUserDataChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setUserData(_objectSpread(_objectSpread({},userData),{},_defineProperty({},name,value)));handleInputValid(evt);}function handleSubmit(evt){evt.preventDefault();props.onUpdateUser(userData);setFormValidationMessages({name:\"\",about:\"\"});setFormValid(true);}function handleOnClose(){props.onClose();setUserData({\"name\":currentUser.name,\"about\":currentUser.about});setFormInputsValid({name:true,about:true});setFormValidationMessages({name:\"\",about:\"\"});setFormValid(true);}return/*#__PURE__*/_jsxs(PopupWithForm,{popupOpen:props.popupOpen,popupType:\"edit_profile\",popupTitle:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",s:true,popupFormName:\"profileForm\",submitButtonText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",onClose:handleOnClose,onSubmit:handleSubmit,isLoading:props.isLoading,loadingText:props.loadingText,onOverlayClose:props.onOverlayClose,isValid:formValid,children:[/*#__PURE__*/_jsxs(\"label\",{className:\"popup__input-group\",htmlFor:\"name\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input_type_name\",type:\"text\",placeholder:\"\\u0412\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F\",name:\"name\",id:\"name\",required:true,minLength:2,maxLength:40,value:userData.name?userData.name:\"\",onChange:handleUserDataChange}),/*#__PURE__*/_jsx(\"span\",{className:[\"popup__error\",formValidationMessages.name!==\"\"?\"popup__error_visible\":\"\"].join(\" \"),id:\"popup__error_type_name\",children:formValidationMessages.name})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"popup__input-group\",htmlFor:\"about\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input_type_about\",type:\"text\",placeholder:\"\\u0412\\u0438\\u0434 \\u0434\\u0435\\u044F\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\",name:\"about\",id:\"about\",required:true,minLength:2,maxLength:200,value:userData.about?userData.about:\"\",onChange:handleUserDataChange}),/*#__PURE__*/_jsx(\"span\",{className:[\"popup__error\",formValidationMessages.about!==\"\"?\"popup__error_visible\":\"\"].join(\" \"),id:\"popup__error_type_about\",children:formValidationMessages.about})]})]});};export default EditProfilePopup;","map":{"version":3,"names":["React","CurrentUserContext","PopupWithForm","jsx","_jsx","jsxs","_jsxs","EditProfilePopup","props","currentUser","useContext","name","about","_React$useState","useState","_React$useState2","_slicedToArray","userData","setUserData","_React$useState3","_React$useState4","formInputsValid","setFormInputsValid","_React$useState5","_React$useState6","formValidationMessages","setFormValidationMessages","_React$useState7","_React$useState8","formValid","setFormValid","handleInputValid","evt","preventDefault","target","validity","valid","_objectSpread","_defineProperty","validationMessage","useEffect","popupOpen","formInputsValidValues","Object","values","isFormValid","includes","handleUserDataChange","_evt$target","value","handleSubmit","onUpdateUser","handleOnClose","onClose","popupType","popupTitle","s","popupFormName","submitButtonText","onSubmit","isLoading","loadingText","onOverlayClose","isValid","children","className","htmlFor","type","placeholder","id","required","minLength","maxLength","onChange","join"],"sources":["C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/src/components/EditProfilePopup.jsx"],"sourcesContent":["import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nconst EditProfilePopup = (props) => {\n\n    const currentUser = React.useContext(CurrentUserContext);\n    const { name, about } = currentUser;\n    const [userData, setUserData] = React.useState({ name: '', about: '' });\n    const [formInputsValid, setFormInputsValid] = React.useState({ name: true, about: true });\n    const [formValidationMessages, setFormValidationMessages] = React.useState({ name: \"\", about: \"\" });\n    const [formValid, setFormValid] = React.useState(true);\n\n    const handleInputValid = (evt) => {\n        evt.preventDefault();\n        const { name } = evt.target;\n\n        if (!evt.target.validity.valid) {\n\n            setFormInputsValid({\n                ...formInputsValid,\n                [name]: false\n            });\n\n            setFormValidationMessages({\n                ...formValidationMessages,\n                [name]: evt.target.validationMessage\n            });\n\n        } else {\n            setFormInputsValid({\n                ...formInputsValid,\n                [name]: true\n            });\n\n            setFormValidationMessages({\n                ...formValidationMessages,\n                [name]: \"\"\n            });\n        }\n    }\n\n    React.useEffect(() => {\n        setUserData({ \"name\": name, \"about\": about });\n    }, [name, about, props.popupOpen]);\n\n    React.useEffect(() => {\n        const formInputsValidValues = Object.values(formInputsValid);\n        const isFormValid = formInputsValidValues.includes(false) ? false : true;\n        setFormValid(isFormValid);\n    }, [formInputsValid, props.popupOpen]);\n\n    function handleUserDataChange(evt) {\n        const { name, value } = evt.target;\n        setUserData({\n            ...userData,\n            [name]: value\n        })\n        handleInputValid(evt);\n    }\n\n    function handleSubmit(evt) {\n        evt.preventDefault();\n        props.onUpdateUser(userData);\n        setFormValidationMessages({ name: \"\", about: \"\" });\n        setFormValid(true);\n    }\n\n    function handleOnClose() {\n        props.onClose();\n        setUserData({ \"name\": currentUser.name, \"about\": currentUser.about });\n        setFormInputsValid({ name: true, about: true });\n        setFormValidationMessages({ name: \"\", about: \"\" });\n        setFormValid(true);\n    }\n\n    return (\n        <PopupWithForm\n            popupOpen={props.popupOpen}\n            popupType=\"edit_profile\"\n            popupTitle=\"Редактировать профиль\"s\n            popupFormName=\"profileForm\"\n            submitButtonText=\"Сохранить\"\n            onClose={handleOnClose}\n            onSubmit={handleSubmit}\n            isLoading={props.isLoading}\n            loadingText={props.loadingText}\n            onOverlayClose={props.onOverlayClose}\n            isValid={formValid}\n        >\n            <label className=\"popup__input-group\" htmlFor=\"name\">\n                <input\n                    className=\"popup__input popup__input_type_name\"\n                    type=\"text\"\n                    placeholder=\"Ваше имя\"\n                    name=\"name\"\n                    id=\"name\"\n                    required\n                    minLength={2}\n                    maxLength={40}\n                    value={userData.name ? userData.name : \"\"}\n                    onChange={handleUserDataChange}\n                />\n                <span\n                    className={[\"popup__error\", formValidationMessages.name !== \"\" ? \"popup__error_visible\" : \"\"].join(\" \")}\n                    id=\"popup__error_type_name\">\n                    {formValidationMessages.name}</span>\n            </label>\n            <label className=\"popup__input-group\" htmlFor=\"about\">\n                <input\n                    className=\"popup__input popup__input_type_about\"\n                    type=\"text\"\n                    placeholder=\"Вид деятельности\"\n                    name=\"about\"\n                    id=\"about\"\n                    required\n                    minLength={2}\n                    maxLength={200}\n                    value={userData.about ? userData.about : \"\"}\n                    onChange={handleUserDataChange}\n                />\n                <span\n                    className={[\"popup__error\", formValidationMessages.about !== \"\" ? \"popup__error_visible\" : \"\"].join(\" \")}\n                    id=\"popup__error_type_about\">\n                    {formValidationMessages.about}</span>\n            </label>\n        </PopupWithForm>\n    );\n};\n\nexport default EditProfilePopup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}