{"ast":null,"code":"import _objectSpread from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{apiSettings}from\"./utils\";var Api=/*#__PURE__*/function(){function Api(options){_classCallCheck(this,Api);this._headers=options.headers;this._serverURL=options.serverURL;this._handlePromiseReturn=function(res){if(res.ok){return res.json();}return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));};}_createClass(Api,[{key:\"getUserMe\",value:function getUserMe(){var _this=this;return fetch(\"\".concat(this._serverURL,\"/users/me\"),{headers:_objectSpread({authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},this._headers)}).then(function(res){return _this._handlePromiseReturn(res);});}},{key:\"setUserData\",value:function setUserData(userName,userAbout){var _this2=this;return fetch(\"\".concat(this._serverURL,\"/users/me\"),{method:\"PATCH\",headers:_objectSpread({authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},this._headers),body:JSON.stringify({name:userName,about:userAbout})}).then(function(res){return _this2._handlePromiseReturn(res);});}},{key:\"setUserAvatar\",value:function setUserAvatar(avatar){var _this3=this;return fetch(\"\".concat(this._serverURL,\"/users/me/avatar\"),{method:\"PATCH\",headers:_objectSpread({authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},this._headers),body:JSON.stringify({avatar:avatar})}).then(function(res){return _this3._handlePromiseReturn(res);});}},{key:\"getCards\",value:function getCards(){var _this4=this;return fetch(\"\".concat(this._serverURL,\"/cards\"),{headers:_objectSpread({authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},this._headers)}).then(function(res){return _this4._handlePromiseReturn(res);});}},{key:\"addNewCard\",value:function addNewCard(cardName,cardLink){var _this5=this;return fetch(\"\".concat(this._serverURL,\"/cards\"),{method:\"POST\",headers:_objectSpread({authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},this._headers),body:JSON.stringify({name:cardName,link:cardLink})}).then(function(res){return _this5._handlePromiseReturn(res);});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardID,cardLiked){var _this6=this;return fetch(\"\".concat(this._serverURL,\"/cards/\").concat(cardID,\"/likes\"),{method:cardLiked?\"DELETE\":\"PUT\",headers:_objectSpread({authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},this._headers)}).then(function(res){return _this6._handlePromiseReturn(res);});}},{key:\"removeCard\",value:function removeCard(cardID){return fetch(\"\".concat(this._serverURL,\"/cards/\").concat(cardID),{method:\"DELETE\",headers:_objectSpread({authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},this._headers)});}},{key:\"getAllData\",value:function getAllData(){return Promise.all([this.getUserMe(),this.getCards()]);}}]);return Api;}();export var api=new Api(apiSettings);","map":{"version":3,"names":["apiSettings","Api","options","_classCallCheck","_headers","headers","_serverURL","serverURL","_handlePromiseReturn","res","ok","json","Promise","reject","concat","status","_createClass","key","value","getUserMe","_this","fetch","_objectSpread","authorization","localStorage","getItem","then","setUserData","userName","userAbout","_this2","method","body","JSON","stringify","name","about","setUserAvatar","avatar","_this3","getCards","_this4","addNewCard","cardName","cardLink","_this5","link","changeLikeCardStatus","cardID","cardLiked","_this6","removeCard","getAllData","all","api"],"sources":["C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/src/utils/api.js"],"sourcesContent":["import { apiSettings } from \"./utils\";\n\nclass Api {\n  constructor(options) {\n    this._headers = options.headers;\n    this._serverURL = options.serverURL;\n    this._handlePromiseReturn = (res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status}`);\n    };\n  }\n\n  getUserMe() {\n    return fetch(`${this._serverURL}/users/me`, {\n      headers: {\n        authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ...this._headers,\n      },\n    }).then((res) => this._handlePromiseReturn(res));\n  }\n\n  setUserData(userName, userAbout) {\n    return fetch(`${this._serverURL}/users/me`, {\n      method: \"PATCH\",\n      headers: {\n        authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ...this._headers,\n      },\n      body: JSON.stringify({\n        name: userName,\n        about: userAbout,\n      }),\n    }).then((res) => this._handlePromiseReturn(res));\n  }\n\n  setUserAvatar(avatar) {\n    return fetch(`${this._serverURL}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: {\n        authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ...this._headers,\n      },\n      body: JSON.stringify({\n        avatar: avatar,\n      }),\n    }).then((res) => this._handlePromiseReturn(res));\n  }\n\n  getCards() {\n    return fetch(`${this._serverURL}/cards`, {\n      headers: {\n        authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ...this._headers,\n      },\n    }).then((res) => this._handlePromiseReturn(res));\n  }\n\n  addNewCard(cardName, cardLink) {\n    return fetch(`${this._serverURL}/cards`, {\n      method: \"POST\",\n      headers: {\n        authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ...this._headers,\n      },\n      body: JSON.stringify({\n        name: cardName,\n        link: cardLink,\n      }),\n    }).then((res) => this._handlePromiseReturn(res));\n  }\n\n  changeLikeCardStatus(cardID, cardLiked) {\n    return fetch(`${this._serverURL}/cards/${cardID}/likes`, {\n      method: cardLiked ? \"DELETE\" : \"PUT\",\n      headers: {\n        authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ...this._headers,\n      },\n    }).then((res) => this._handlePromiseReturn(res));\n  }\n\n  removeCard(cardID) {\n    return fetch(`${this._serverURL}/cards/${cardID}`, {\n      method: \"DELETE\",\n      headers: {\n        authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        ...this._headers,\n      },\n    });\n  }\n\n  getAllData() {\n    return Promise.all([this.getUserMe(), this.getCards()]);\n  }\n}\n\nexport const api = new Api(apiSettings);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}