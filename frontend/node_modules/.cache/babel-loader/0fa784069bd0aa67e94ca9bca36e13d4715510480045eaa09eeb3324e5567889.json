{"ast":null,"code":"import _defineProperty from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import PopupWithForm from\"./PopupWithForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddPlacePopup=function AddPlacePopup(props){var _React$useState=React.useState({name:'',link:''}),_React$useState2=_slicedToArray(_React$useState,2),card=_React$useState2[0],setCard=_React$useState2[1];var _React$useState3=React.useState({name:true,about:true}),_React$useState4=_slicedToArray(_React$useState3,2),formInputsValid=_React$useState4[0],setFormInputsValid=_React$useState4[1];var _React$useState5=React.useState({name:\"\",about:\"\"}),_React$useState6=_slicedToArray(_React$useState5,2),formValidationMessages=_React$useState6[0],setFormValidationMessages=_React$useState6[1];var _React$useState7=React.useState(true),_React$useState8=_slicedToArray(_React$useState7,2),formValid=_React$useState8[0],setFormValid=_React$useState8[1];var handleInputValid=function handleInputValid(evt){evt.preventDefault();var name=evt.target.name;if(!evt.target.validity.valid){setFormInputsValid(_objectSpread(_objectSpread({},formInputsValid),{},_defineProperty({},name,false)));setFormValidationMessages(_objectSpread(_objectSpread({},formValidationMessages),{},_defineProperty({},name,evt.target.validationMessage)));}else{setFormInputsValid(_objectSpread(_objectSpread({},formInputsValid),{},_defineProperty({},name,true)));setFormValidationMessages(_objectSpread(_objectSpread({},formValidationMessages),{},_defineProperty({},name,\"\")));}};function handleOnClose(){props.onClose();setFormInputsValid({name:false,link:false});setFormValidationMessages({name:\"\",link:\"\"});setFormValid(false);}function handleCardChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setCard(_objectSpread(_objectSpread({},card),{},_defineProperty({},name,value)));handleInputValid(evt);}function handleSubmit(evt){evt.preventDefault();props.onAddPlace(card);}React.useEffect(function(){setFormInputsValid({name:false,link:false});setFormValidationMessages({name:\"\",link:\"\"});setFormValid(false);setCard({name:'',link:''});},[props.popupOpen]);React.useEffect(function(){var formInputsValidValues=Object.values(formInputsValid);var isFormValid=formInputsValidValues.includes(false)?false:true;setFormValid(isFormValid);},[formInputsValid,props.popupOpen]);return/*#__PURE__*/_jsxs(PopupWithForm,{popupType:\"new-place\",popupTitle:\"\\u041D\\u043E\\u0432\\u043E\\u0435 \\u043C\\u0435\\u0441\\u0442\\u043E\",submitButtonText:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\",popupOpen:props.popupOpen,onClose:handleOnClose,onOverlayClose:props.onOverlayClose,popupFormName:\"newPlaceForm\",onSubmit:handleSubmit,isLoading:props.isLoading,loadingText:props.loadingText,isValid:formValid,children:[/*#__PURE__*/_jsxs(\"label\",{className:\"popup__input-group\",htmlFor:\"place-title\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input_place_title\",type:\"text\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\",value:card.name||\"\",name:\"name\",id:\"name_title\",required:true,minLength:2,maxLength:30,onChange:handleCardChange}),/*#__PURE__*/_jsx(\"span\",{className:[\"popup__error\",formValidationMessages.name!==\"\"?\"popup__error_visible\":\"\"].join(\" \"),id:\"place_name-error\",children:formValidationMessages.name})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"popup__input-group\",htmlFor:\"place-description\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input_place_description\",type:\"url\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",value:card.link||\"\",name:\"link\",id:\"place_link\",required:true,onChange:handleCardChange}),/*#__PURE__*/_jsx(\"span\",{className:[\"popup__error\",formValidationMessages.link!==\"\"?\"popup__error_visible\":\"\"].join(\" \"),id:\"place_url-error\",children:formValidationMessages.link})]})]});};export default AddPlacePopup;","map":{"version":3,"names":["React","PopupWithForm","jsx","_jsx","jsxs","_jsxs","AddPlacePopup","props","_React$useState","useState","name","link","_React$useState2","_slicedToArray","card","setCard","_React$useState3","about","_React$useState4","formInputsValid","setFormInputsValid","_React$useState5","_React$useState6","formValidationMessages","setFormValidationMessages","_React$useState7","_React$useState8","formValid","setFormValid","handleInputValid","evt","preventDefault","target","validity","valid","_objectSpread","_defineProperty","validationMessage","handleOnClose","onClose","handleCardChange","_evt$target","value","handleSubmit","onAddPlace","useEffect","popupOpen","formInputsValidValues","Object","values","isFormValid","includes","popupType","popupTitle","submitButtonText","onOverlayClose","popupFormName","onSubmit","isLoading","loadingText","isValid","children","className","htmlFor","type","placeholder","id","required","minLength","maxLength","onChange","join"],"sources":["C:/Users/Freddy/Desktop/dev/react-mesto-api-full-gha/react-mesto-api-full-gha/frontend/src/components/AddPlacePopup.jsx"],"sourcesContent":["import React from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\nconst AddPlacePopup = (props) => {\n\n    const [card, setCard] = React.useState({ name: '', link: '' });\n\n    const [formInputsValid, setFormInputsValid] = React.useState({ name: true, about: true });\n    const [formValidationMessages, setFormValidationMessages] = React.useState({ name: \"\", about: \"\" });\n    const [formValid, setFormValid] = React.useState(true);\n\n    const handleInputValid = (evt) => {\n        evt.preventDefault();\n        const { name } = evt.target;\n\n        if (!evt.target.validity.valid) {\n\n            setFormInputsValid({\n                ...formInputsValid,\n                [name]: false\n            });\n\n            setFormValidationMessages({\n                ...formValidationMessages,\n                [name]: evt.target.validationMessage\n            });\n\n        } else {\n            setFormInputsValid({\n                ...formInputsValid,\n                [name]: true\n            });\n\n            setFormValidationMessages({\n                ...formValidationMessages,\n                [name]: \"\"\n            });\n        }\n    }\n\n    function handleOnClose() {\n        props.onClose();\n        setFormInputsValid({ name: false, link: false });\n        setFormValidationMessages({ name: \"\", link: \"\" });\n        setFormValid(false);\n    }\n\n    function handleCardChange(evt) {\n        const { name, value } = evt.target;\n        setCard({\n            ...card,\n            [name]: value\n        })\n        handleInputValid(evt);\n    }\n\n    function handleSubmit(evt) {\n        evt.preventDefault();\n        props.onAddPlace(card);\n    }\n\n    React.useEffect(() => {\n        setFormInputsValid({ name: false, link: false });\n        setFormValidationMessages({ name: \"\", link: \"\" });\n        setFormValid(false);\n        setCard({ name: '', link: '' });\n    }, [props.popupOpen])\n\n    React.useEffect(() => {\n        const formInputsValidValues = Object.values(formInputsValid);\n        const isFormValid = formInputsValidValues.includes(false) ? false : true;\n        setFormValid(isFormValid);\n    }, [formInputsValid, props.popupOpen]);\n\n    return (\n        <PopupWithForm\n            popupType=\"new-place\"\n            popupTitle=\"Новое место\"\n            submitButtonText=\"Создать\"\n            popupOpen={props.popupOpen}\n            onClose={handleOnClose}\n            onOverlayClose={props.onOverlayClose}\n            popupFormName=\"newPlaceForm\"\n            onSubmit={handleSubmit}\n            isLoading={props.isLoading}\n            loadingText={props.loadingText}\n            isValid={formValid}\n        >\n            <label className=\"popup__input-group\" htmlFor=\"place-title\">\n                <input\n                    className=\"popup__input popup__input_place_title\"\n                    type=\"text\"\n                    placeholder=\"Название\"\n                    value={card.name || \"\"}\n                    name=\"name\"\n                    id=\"name_title\"\n                    required\n                    minLength={2}\n                    maxLength={30}\n                    onChange={handleCardChange}\n                />\n                <span\n                    className={[\"popup__error\", formValidationMessages.name !== \"\" ? \"popup__error_visible\" : \"\"].join(\" \")}\n                    id=\"place_name-error\"\n                >{formValidationMessages.name}</span>\n            </label>\n            <label className=\"popup__input-group\" htmlFor=\"place-description\">\n                <input\n                    className=\"popup__input popup__input_place_description\"\n                    type=\"url\"\n                    placeholder=\"Ссылка на картинку\"\n                    value={card.link || \"\"}\n                    name=\"link\"\n                    id=\"place_link\"\n                    required\n                    onChange={handleCardChange}\n                />\n                <span\n                    className={[\"popup__error\", formValidationMessages.link !== \"\" ? \"popup__error_visible\" : \"\"].join(\" \")}\n                    id=\"place_url-error\"\n                >{formValidationMessages.link}</span>\n            </label>\n        </PopupWithForm>\n    );\n};\nexport default AddPlacePopup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}